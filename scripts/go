#!/bin/bash

# ğŸ¯ Bananna Box Server Control - Simple semantic commands

case "${1:-help}" in
    "server")
        echo "ğŸš€ Starting Bananna Box server..."
        sudo systemctl start bananna-box
        sleep 2
        sudo systemctl status bananna-box --no-pager -l
        ;;
    "restart")
        echo "ğŸ”„ Restarting Bananna Box server..."
        sudo systemctl restart bananna-box
        sleep 2
        sudo systemctl status bananna-box --no-pager -l
        ;;
    "stop")
        echo "ğŸ›‘ Stopping Bananna Box server..."
        sudo systemctl stop bananna-box
        sudo systemctl status bananna-box --no-pager -l
        ;;
    "status"|"check")
        echo "ğŸ“Š Bananna Box Server Status:"
        sudo systemctl status bananna-box --no-pager -l
        ;;
    "logs"|"watch")
        echo "ğŸ“‹ Live server logs (Ctrl+C to exit):"
        journalctl -u bananna-box -f
        ;;
    "health")
        echo "ğŸ” Server Health Check:"
        curl -s http://localhost:3000/health | jq 2>/dev/null || echo "Server not responding"
        ;;
    "stats")
        echo "ğŸ“ˆ Server Statistics:"
        curl -s http://localhost:3000/stats | jq 2>/dev/null || echo "Server not responding"
        ;;
    "test")
        echo "ğŸ§ª Running test suite..."
        ./scripts/test-live-data.sh
        ;;
    "help"|*)
        echo "ğŸ¯ Bananna Box Server Control"
        echo "============================="
        echo "Usage: ./scripts/go <command>"
        echo ""
        echo "Commands:"
        echo "  server     ğŸš€ Start the server"
        echo "  restart    ğŸ”„ Restart the server"
        echo "  stop       ğŸ›‘ Stop the server"
        echo "  status     ğŸ“Š Show server status"
        echo "  logs       ğŸ“‹ View live logs"
        echo "  health     ğŸ” Quick health check"
        echo "  stats      ğŸ“ˆ Show server stats"
        echo "  test       ğŸ§ª Run test suite"
        echo "  help       â“ Show this help"
        echo ""
        echo "Examples:"
        echo "  ./scripts/go server    # Start server"
        echo "  ./scripts/go restart   # Restart server"
        echo "  ./scripts/go logs      # Watch logs"
        ;;
esac